<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <title>Dataset</title>
  <link th:href="@{/static/css/validation.css}" rel="stylesheet">
</head>

<body>
<!-- Header pour role Ruche -->
<div th:if="${loggedInUser != null and loggedInUser.getRole().getId_role() == 2}">
    <div th:replace="headerRuche.html"></div>
</div>

<!-- Header pour role Admin -->
<div th:if="${loggedInUser != null and loggedInUser.getRole().getId_role() == 3}">
    <div th:replace="headerConnect.html"></div>
</div>

<!-- Header pour session non connectée -->
<div th:unless="${loggedInUser != null}">
    <div th:replace="headerNonConnect.html"></div>
</div>

<div class="container">
    <div class="header-container">
        <h2>DATASET</h2>
    </div>
 
    <div id="filter-bar">
        <label for="filter">Filtrer par :</label>
        <input type="text" id="filter" onkeyup="filterTable()" placeholder="Entrez votre filtre">
    </div>
 
    <!-- Layout container -->
    <div class="layout-container">
        <div class="table-container">
            <form th:action="@{/updateAccountStatus}" method="post">
                <table id="myTable">
                    <tr>
                        <th>Nom</th>
                        <th>PRENOM</th>
                        <th>POSTE</th>
                        <th>ROLE</th>
                        <th>DOMAINE</th>
                        <th>Action</th>
                    </tr>
                    <tr th:each="user : ${usersList}" th:id="${'userRow_' + user.idUser}">
		            <td th:text="${user.nom}"></td>
		            <td th:text="${user.prenom}"></td>
		            <td th:text="${user.poste != null ? user.poste.name_poste : 'N/A'}"></td>
		            <td th:text="${user.role != null ? user.role.name_role : 'N/A'}"></td>
		            <td th:text="${user.domaine != null ? user.domaine.nameDomain : 'N/A'}"></td>
		            <td th:text="${user.statusUser}"></td>
		            <td>
						
						<button type="submit" name="action" value="activate" th:value="${user.idUser}">Activer</button>
		                <button type="submit" name="action" value="deactivate" th:value="${user.idUser}">Désactiver</button>
		                <input type="hidden" th:name="userId" th:value="${user.idUser}" />
		            </td>
		        </tr>
                </table>
            </form>
        </div>
    </div>
</div>
</body>
</html>
