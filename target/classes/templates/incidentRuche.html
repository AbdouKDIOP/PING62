<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/static/css/incident.css}" rel="stylesheet">
    <title>Incident</title>
  </head>
  <body>
	
<!-- Header pour role Ruche -->
<div th:if="${loggedInUser != null and loggedInUser.idRole == 2}">
    <div th:replace="headerRuche.html"></div>
</div>

<!-- Header pour role Admin -->
<div th:if="${loggedInUser != null and loggedInUser.idRole == 3}">
    <div th:replace="headerConnect.html"></div>
</div>

<!-- Header pour session non connectée -->
<div th:unless="${loggedInUser != null}">
    <div th:replace="headerNonConnect.html"></div>
</div>

	


	  
	  <div class="principal">
		  <h1>INCIDENT/ NOUVEAUTE</h1>
		  <div class="annonce">
			  <p>Bienvenue sur la page des incidents. Vous avez la possiblité d'ajouter, supprimer et modifier des incidents.</p>
		  </div>
		  
		  
<div id="filter-bar">
            <label for="filter">Filtrer par :</label>
            <input type="text" id="filter" onkeyup="filterTable()" placeholder="Entrez votre filtre">
        </div>		  
		  
			  <div class="mix">
				  <div class="table-container">
            <table id="myTable" class="custom-table">
		        <thead>
		            <tr>
		                <th>Date</th>
		                <th>Titre</th>
		                <th>Description</th>
		                <th>Status</th>
		            </tr>
		        </thead>
		        
		        <tbody>
            <tr>
				<td>21/01/2024</td>
		        <td>Incident chocolaterie</td>
                <td>Des reparation a lieux actuellement sur le site de la chocolaterie suite a un defaut de moulage</td>
                <td>Actif</td>
            </tr>
        </tbody>
    </table>
    </div>
				  <div class="right">
						  <a th:href="@{add_incident}"><button type="button_add">Ajouter</button></a>
						  <button type="button_mod">Modifier</button>
				  </div>
			 </div>
	  </div>
	  
    <script>
    function filterTable() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("filter");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");

    for (i = 0; i < tr.length; i++) {
        var displayRow = false;
        td = tr[i].getElementsByTagName("td");

        // Exclude header rows from filtering
        if (i === 0 || td.length === 0) {
            tr[i].style.display = "";
            continue;
        }

        for (j = 0; j < td.length; j++) {
            txtValue = td[j].textContent || td[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                displayRow = true;
                break; // No need to check other columns if a match is found in one column
            }
        }

        tr[i].style.display = displayRow ? "" : "none";
    }
}

</script>	
	  
  </body>
</html>